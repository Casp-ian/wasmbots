# Processed by beschi <https://github.com/sjml/beschi> to generate
#    message-parsing code for the host and all the client libraries.

[meta]
namespace = "WasmBotsMessage"
list_size_type = "uint16"
string_size_type = "byte"

# used internally for handling host <-> module mishaps
[[messages]]
_name = "_Error"
description = "string"

# initial setup message that you can either accept or reject
[[messages]]
_name = "InitialParameters"
paramsVersion = "uint16"
engineVersionMajor = "uint16"
engineVersionMinor = "uint16"
engineVersionPatch = "uint16"

# player receives every tick
[[messages]]
_name = "PresentCircumstances"
lastTickDuration = "uint32"
lastMoveSucceeded = "bool" # these two would be better as an enum, but beschi doesn't do that yet
lastMoveValid = "bool"
currentHitPoints = "uint16"
currentStatus = "byte"
surroundings = "[uint16]"
surroundingsRadius = "byte"


### moves that the player submits

[[messages]]
_name = "Wait"

[[messages]]
_name = "Resign"

[[messages]]
_name = "MoveTo"
direction = "byte"
distance = "byte"

[[messages]]
_name = "Open"
targetX = "int16"
targetY = "int16"

[[messages]]
_name = "Close"
targetX = "int16"
targetY = "int16"

# [[messages]]
# _name = "Attack"
# targetX = "int16"
# targetY = "int16"

# [[messages]]
# _name = "CastSpell"
# spellID = "byte"
# params = "[byte]"
# targetX = "int16"
# targetY = "int16"

# [[messages]]
# _name = "Examine"

# [[messages]]
# _name = "Take"
